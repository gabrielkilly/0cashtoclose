This was written to be used as a google cloud function. 